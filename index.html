<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Editor</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--link rel="stylesheet" href="css/normalize.css"?-->
    <link rel="stylesheet" href="css/main.css">
    <!--script type="text/javascript" src="js/jquery.js"></script-->
    <script type="text/javascript" src="js/jscolor.js"></script>
    <script type="text/javascript" src="js/edt.js"></script>
</head>
<body>

<div id="main">
    <div id="toolbar">
        <div class="tbwrap">
            <button onclick="edt.nou();" title="Doc Nou"><span class="fa new"></span></button>
            <button onclick="edt.loadFile();" title="Deschide"><span class="fa open"></span></button>
            <button onclick="edt.saveToLoco();" title="Save în cache"><i class="fa save"></i></button>
            <button onclick="edt.saveBuff();" title="SaveAs"><i class="fa saveas"></i></button>
        </div>
        <div class="tbwrap">
            <button onclick="document.execCommand('undo', false, null);" title="Undo"><i class="fa undo"></i></button>
            <button onclick="document.execCommand('redo', false, null);" title="Redo"><i class="fa redo"></i></button>
        </div>
        <button onclick="edt.getCaretPos();" title="worker"><i class="fa">x</i></button>
        <button onclick="tim();" title="worker"><i class="fa">X</i></button>
    </div>
    <div id="page">
        <div id="loadedit"></div>
        <div id="tArea" class="textarea" contenteditable="true">Conținut <em>preloaded</em> în <strong>editor</strong>
        </div>
    </div>
    <div id="tb1" class="tbfloat">
        <div class="trow">
            <button onclick="document.execCommand('bold', false, null);" title="Bold"><span class="fa bold"></span>
            </button>
            <button onclick="document.execCommand('italic', false, null);" title="Italic"><i class="fa italic"></i>
            </button>
            <button onclick="document.execCommand('underline', false, null);" title="Subliniat"><i
                    class="fa underline"></i>
            </button>
            <button onclick="document.execCommand('strikeThrough', false, null);" title="Tăiat"><i
                    class="fa strike"></i>
            </button>
        </div>
        <div class="trow">
            <button onclick="document.execCommand('subscript', false, null);" title="Subscript(indice)"><i
                    class="fa sub"></i></button>
            <button onclick="document.execCommand('superscript', false, null);" title="Suprascript(exponent)"><i
                    class="fa sup"></i></button>
            <button onclick="document.execCommand('indent', false, 2);" title="Indent"><i
                    class="fa indent"></i></button>
            <button onclick="document.execCommand('outdent', false, null);" title="Dedent"><i
                    class="fa dedent"></i></button>
        </div>
        <div class="trow">
            <button onclick="document.execCommand('insertHorizontalRule', false, null);" title="Linie orizontală"><i
                    class="fa line"></i></button>
            <button onclick="document.execCommand('insertParagraph', false, null);" title="Paragraf nou"><i
                    class="fa">P</i>
            </button>
            <button onclick="document.execCommand('insertUnorderedList');" title="Listă"><i class="fa ulist"></i>
            </button>
            <button onclick="document.execCommand('insertOrderedList');" title="Listă Ordonată"><i class="fa olist"></i>
            </button>
        </div>
        <div class="trow">
            <button onclick="document.execCommand('justifyLeft', false, null);" title="Aliniază la stânga"><i
                    class="fa aleft"></i></button>
            <button onclick="document.execCommand('justifyCenter', false, null);" title="Centrează"><i
                    class="fa acenter"></i></button>
            <button onclick="document.execCommand('justifyRight', false, null);" title="Aliniază la dreapta"><i
                    class="fa aright"></i></button>
            <button onclick="document.execCommand('justifyFull', false, null);" title="Aliniază uniform"><i
                    class="fa ajust"></i></button>
        </div>
        <div class="trow">
            <button onclick="document.execCommand('createLink', false, 'http://www.google.com');" title="HyperLink"><i
                    class="fa link"></i></button>
            <button onclick="edt.setSelStyle('mark');" title="Marker"><i class="fa eye">!</i></button>
        </div>
    </div>
</div>

<script type="text/javascript">
    function work() {
        wrk.postMessage(edt.text());
    }
    window.onunload = function () {
        wrk.terminate();
        clearInterval(pars);
    };
    function loadCanvas(id) {
        var canvas = document.createElement('canvas');
        var div = document.getElementById(id);
        canvas.id = "CursorLayer";
        canvas.width = 600;
        canvas.height = 400;
        canvas.style.zIndex = 8;
        canvas.style.position = "absolute";
        canvas.style.left = 0;
        canvas.style.top = 0;
        canvas.style.border = "1px solid #0f0";
        div.appendChild(canvas);
        var ctx = canvas.getContext("2d");
        ctx.lineWidth = 10;
        ctx.strokeStyle = "#777";
        ctx.shadowBlur = 10;
        ctx.shadowColor = "#00f";
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(300, 150);
        ctx.stroke();
    }
    /*
     Storage.prototype.getObject = function(key) {
     var value = this.getItem(key);
     return value && JSON.parse(value);
     }
     */


    function testf() {
        var i = document.getElementById('infile');
        i.click();
    }

    function getSelectionHtml() {
        var html = "";
        if (typeof window.getSelection != "undefined") {
            var sel = window.getSelection();
            if (sel.rangeCount) {
                var container = document.createElement("div");
                for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                    container.appendChild(sel.getRangeAt(i).cloneContents());
                }
                html = container.innerHTML;
            }
        } else if (typeof document.selection != "undefined") {
            if (document.selection.type == "Text") {
                html = document.selection.createRange().htmlText;
            }
        }
        alert(html);
    }
    function replaceSelectedText(replacementText) {
        var sel, range;
        if (window.getSelection) {
            sel = window.getSelection();
            if (sel.rangeCount) {
                /*var elm = $('#txt');
                 var start = elm.selectionStart;
                 var end = elm.selectionEnd;
                 alert(elm.value.substring(start, end))*/
                range = sel.getRangeAt(0);
                range.deleteContents();
                range.insertNode(document.createTextNode(replacementText));
            }
        } else if (document.selection && document.selection.createRange) {
            range = document.selection.createRange();
            range.text = replacementText;
        }
    }
    function lst(o) {
        var s = '';
        for (var i in o) {
            try {
                console.log(i + ' => ' + o[i]);
            } catch (err) {
                console.log("ERR: " + err.message);
            }
        }
    }
</script>
</body>
</html>
